<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro con Ubicación</title>
  <script>
    function redirigirConUbicacion() {
      const urlBase = "https://docs.google.com/forms/d/e/1FAIpQLScfS4RKMXULBYuTapuIkj7rbb2Tv6VpCdgx-r_JgYh92hLbjA/viewform?usp=pp_url&entry.1869713733";
      
      if (!navigator.geolocation) {
        alert("Tu navegador no permite acceder a la ubicación.");
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (position) => {
          const lat = position.coords.latitude.toFixed(6);
          const lng = position.coords.longitude.toFixed(6);
          const ubicacion = encodeURIComponent(`${lat},${lng}`);
          const finalUrl = urlBase + ubicacion;
          window.location.href = finalUrl;
        },
        (error) => {
          alert("No se pudo obtener tu ubicación. Activa los permisos de ubicación.");
          console.error("Error de geolocalización:", error);
        }
      );
    }

    window.onload = redirigirConUbicacion;
  </script>
</head>
<body>
  <h2>Obteniendo tu ubicación...</h2>
  <p>Por favor espera mientras te redirigimos al formulario.</p>
</body>
</html>
